# grubmod
[![Downloads](https://img.shields.io/github/downloads/NZK95/grubmod/total.svg)](https://github.com/NZK95/grubmod/releases)

BIOS/UEFI по умолчанию показывает пользователю лишь малую часть своих переменных (параметров). Большинство из них спрятаны и обычные пользовательский интерфейс их не видит. Эти скрытые опции отвечают за всё: от таймингов памяти до параметров питания процессора. <br><br>
**Переменные BIOS/UEFI** — это хранящиеся в энергонезависимой памяти (NVRAM) пары “ключ–значение”. Производители обычно блокируют доступ к этим переменным. <br>

**grubmod** — инструмент которые позволяет просматривать и изменять скрытые переменные BIOS прямо через загрузчик GRUB, используя удобный графический интерфейс. Программа генерирует корректный скрипт с нужными изменениями и применяет его следуя инструкциям.

> ## Дисклеймер  
> Автор не несёт ответственности за любой возможный ущерб, причинённый оборудованию в результате использования данного проекта.  
> Вы используете программу на свой страх и риск.

## Основные возможности
- **Отображение всех переменных BIOS/UEFI, включая скрытые и все их данные.** <br>
- **Удобные фильтры для отображения и анализа параметров.** <br>
- **Изменение переменных с последующим применением через GRUB.**  <br>
- **Возможность импорта и экспорта конфигов.** <br>
- **Наличие встроенных конфигов с различными пресетами.** <br>
- **Генерация и исполнение скриптов для автоматизации изменений.**  <br>
- **Возможность отслеживания ошибок через логирование.** <br>
## Инструкции
### 1. Подготовка робочих файлов
1. Скачайте последний релиз ```grubmod.```  <br>
2. Скачайте ТЕКУЩУЮ версию прошивки вашего биоса и поместите его в робочую папку. <br>
3. Передвиньте файл с прошивкой в ```UEFIToolNE.exe```.  <br>
4. В открытом окне нажмите комбинацию клавиш ```Ctrl + F```. <br>
5. Выберите секцию ```Text```, и напишите имя любого параметра например: ```ASPM```. <br>
   
<p align="left">
  <img src="https://github.com/NZK95/grubmod/blob/master/docs/Usage/%231.png?raw=true">
</p>

6. После поиска, перейдите в любое вхождение. <br>
7. Выберите файл ```PE32 image section```  в разделе ```Setup```, и нажмите на него ПКМ. <br>
8. В открытом окне нажмите ```Extract as is.``` <br>

<p align="left">
  <img src="https://github.com/NZK95/grubmod/blob/master/docs/Usage/%232.png?raw=true">
</p>

9. Сохраните файл в робочую директорию. <br>
10. Откройте сохраненный файл в grubmod, через кнопку **Import file**.

### 2. Использование grubmod
- **Match case** - выполняет поиск только с точным совпадением. <br>
- **Parametr/Description** - позволяет выполнить поиск по имени или описанию параметра. <br>
- **Set all to** - доступна в том случае, если у текущей коллекции параметров есть общие значения, что бы их применить нажмите кнопку **Apply**.
---

- **Import file** - позволяет загрузить главный файл биоса. Например: ```Section_PE32_image_Setup_Setup.sct.0.0.en-US.uefi.ifr.txt```.
- **Export script** - позволяет экспортировать скрипт с настроенными параметрами.
- **Build config** - позволяет создать конфиг на базе выбранных параметров.
- **Load config** - позволяет загрузить и применить текстовый конфиг с параметрами.
- **Google** - позволяет выполнить поиск параметра в Google.
- **Search** - позволяет выполнить поиск по коллекции.
- **Clear** - позволяет сбросить коллекцию параметров по умолчанию.
---
В правом нижнем углу, есть 4 опции, которые определяют какой тип настроек будет показан.
- Все параметры. <br>
- Все параметры с выборычными значениями. <br>
- Все числовые параметры. <br>
- Все логические параметры. <br>

---
Комбинации клавиш: <br>
```Enter``` - Search; <br>
```Ctrl + C``` - Clear; <br>
```Ctrl + G``` - Google; <br>
```Ctrl + E``` - Export script; <br>
```Ctrl + L``` - Load config; <br>

---
### 3. Подготовка USB-накопителя
1. Oтформатируйте свой накопитель как `FAT32`.
2. Скачайте UEFI файл из одного из этих источников:
- [UEFI-Shell](https://github.com/pbatard/UEFI-Shell/releases/latest) (`shellx64.efi`)
- Official [EDK2 stable releases](https://github.com/tianocore/edk2/releases/download/edk2-stable202002/ShellBinPkg.zip) (`ShellBinPkg > UefiShell > X64 > Shell.efi`); Этот источник может быть устаревшим, не рекомандую его к использованию.
4. Переименуйте скачанный UEFI файл на `BOOTX64.EFI` и поместите его по следующему пути: `USB:\EFI\BOOT`.
5. Поместите `setup_var.efi` и `setupvar-script.nsh` в корень USB-накопителя.

### 4. Применение скрипта в GRUB
1. Загрузитесь с флешки в BOOT меню (Посмотрите комбинацию клавиш для вашей материнской платы в интернете).
2. Выберите ваш USB-накопитель, введя его идентификатор в системе:
- Просмотрите таблицу отображения (Mapping Table), которая отображается по умолчанию. Чтобы показать её снова - введите map в консоль. Скорее всего, это будет FS0.
3. Запустите скрипт с помощью следующей команды:
```bash
.\setupvar-script.nsh
 ```
4. Подождите пока скрипт завершит свое выполнение.
5. Выключите компьютер через кнопку на корпусе, для применения изменений.

### 5. Возможные проблемы
Часто случается, что при изменении параметров в биосе, компьютер может не запускаться.
Что бы сбросить BIOS к настройкам по умолчанию, очистите CMOS или извлеките батарейку.

### Синтаксис конфига
Если вы желаете создать/загрузить кастомный конфиг, вы должны соблюдать синтаксис. При несоблюдении или несуществовании параметра, он будет игнорироваться. 
```bash
ИМЯ ПАРАМЕТРА | ЖЕЛАЕМОЕ ЗНАЧЕНИЕ
 ```
Тип файла конфига должен быть  ```.txt```, а в имени конфига, должно присутствовать слово ```config```. <br>
Примеры:  ```my-config.txt```, ```Configtest.txt```.

## Благодарности
 - [UEFI-Editor by BoringBoredom](https://github.com/BoringBoredom/UEFI-Editor?tab=readme-ov-file#how-to-change-hidden-settings-without-flashing-a-modded-bios) <br>
 - [grub-mod-setup_var by datasone](https://github.com/datasone/grub-mod-setup_var) <br>
 - [setup_var.efi](https://github.com/datasone/setup_var.efi?tab=readme-ov-file) <br>
 - [UEFI](https://github.com/LongSoft/UEFITool#known-issues) <br>
 
## Устранение неполадок
Если вы столкнулись с ошибками - сообщите о проблеме через систему отслеживания ошибок.
